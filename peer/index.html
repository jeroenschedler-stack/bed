<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>BED HOSPITALITY — Self-Assessment</title>
<style>
            /* === FINAL consolidated fixes === */
            @media print {
                /* --- SCORE BY GROUP rows --- */
                #pdfReport #pdfGroupRows td {
                    padding: 8px 1px !important;
                    vertical-align: middle !important;
                    font-size: 12px !important;
                    text-align: left !important;
                }

                /* --- STATEMENTS header bar alignment --- */
                #pdfReport .statements-bar {
                    display: grid !important;
                    grid-template-columns: 10% 55% 20% 15% !important; /* NO | STATEMENT | GROUP | SCORE */
                    align-items: center !important;
                    padding: 6px 10px !important;
                }
                #pdfReport .statements-bar .lbl-stmt {
                    grid-column: 1 / span 2 !important;
                    justify-self: start !important;
                    text-align: left !important;
                }
                #pdfReport .statements-bar .lbl-group {
                    grid-column: 3 !important;
                    justify-self: start !important;
                    text-align: left !important;
                }
                #pdfReport .statements-bar .lbl-score {
                    grid-column: 4 !important;
                    justify-self: center !important;
                    text-align: center !important;
                }
            }
        </style>
<style>
              :root{
                --pad:20px; --label-w:96px; --gap:6px;
                --brand-blue:#1E90FF; --blue:#1E90FF;
                --progress-red:#E11D48; --progress-gray:#f3f4f6; --gray-300:#cfd4dc;
                --text:#111; --muted:#555; --line:#e5e7eb;
              }
              *{box-sizing:border-box}
              body{font-family:system-ui, Arial, sans-serif; background:#F9FAFB; color:var(--text); margin:0}
              .container{width:100%; margin:0; padding:24px var(--pad)}

              .h1, h1 {
              font-size:20pt;
              margin:0 0 8px 0;
              line-height:1.2;
              font-weight:900;   /* updated to heavy weight */
              color:#444;         /* unified dark gray */
            }
              .subheader{
              font-size:15pt;
              font-weight:800;
              color:#444;
              margin:0 0 12px 0;
            }
              .section-title{
              font-size:18pt;
              font-weight:700;
              color:#444;
              margin:18px 0 10px 0;
              line-height:1.25;
            }
              .intro{
              font-size:11pt;
              font-weight:400;
              line-height:1.4;
              color:#444;
              margin:4px 0 14px 0;
            }

              .progress{display:flex; gap:10px; margin:6px 0 16px 0}
              .dot{
              width:14px;
              height:14px;
              border-radius:50%;
              background:var(--progress-gray);
              border:1px solid #e5e7eb;
            }
              .dot.active{background:var(--progress-red); border-color:var(--progress-red)}

              .row{display:grid; grid-template-columns:minmax(84px, var(--label-w)) 1fr; column-gap:var(--gap); align-items:center; margin:10px 0}
              .row>label{
              font-size:11pt;
              font-weight:400;
              color:#444;
              white-space:normal;
              word-break:break-word;
            }
              .row>input, .row>select{width:100%; padding:10px 12px; font-size:10pt; border:1px solid var(--gray-300); border-radius:10px; background:#fff; transition:box-shadow .15s, border-color .15s}
              .row>input:focus, .row>select:focus{outline:none; border-color:rgba(30,144,255,.8); box-shadow:0 0 0 3px rgba(30,144,255,.18); background:#fff}
              select:invalid{color:#aaa}

              .actions{padding-left:calc(var(--label-w) + var(--gap)); margin-top:14px; display:flex; gap:10px; justify-content:flex-end}
              button { width: 100px; height: 42px; font-size: 12pt; border: none; border-radius: 14px; text-align: center; }
            button:enabled{background:var(--blue); color:#fff; cursor:pointer;}
            button:disabled{background:#ccc; color:#666; cursor:not-allowed;}

              .btn-secondary{width:120px; height:42px; font-size:12pt;}

              /* QUESTIONS */
              .q-item{padding:12px 0;  display:grid; grid-template-columns: 26px 1fr; column-gap:6px; align-items:baseline}
              .q-num{
              font-size:11pt;
              font-weight:500;       /* medium weight */
              line-height:1.4;
              color:#444;
              text-align:right;
            }
              .q-body{display:block}
              .q-title{
              display:block;
              font-size:11pt;
              font-weight:500;       /* medium weight */
              margin:0 0 3px 0;
              line-height:1.4;
              color:#444;
            }
              .q-sub{
              display:block;
              font-size:11pt;
              font-weight:400;       /* normal weight */
              margin:0 0 8px 0;
              line-height:1.4;
              color:#444;
            }
              .pill{display:inline-block; width:30px; height:30px; line-height:30px; text-align:center; border:1px solid #cfcfcf; border-radius:50%; margin-right:10px; cursor:pointer; user-select:none; font-size:16px}
              .pill.selected{background:var(--blue); color:#fff}

              /* SCORE */
              .score-kicker{font-size:11pt; font-weight:400; color:#808080; margin:12px 0 8px 0}
              .score-big{font-size:20pt; font-weight:900; color:#444; margin:0 0 24px 0}
              .gauge{position:relative; height:28px; border-radius:8px; background:linear-gradient(90deg,#ef4444 0%, #f59e0b 35%, #fbbf24 50%, #84cc16 70%, #22c55e 100%);}
              .gauge::after{content:""; position:absolute; top:-8px; bottom:-8px; width:10px; border-radius:6px; background:#444}

              /* Congrats */
              .big-check{width:120px; height:120px; border-radius:60px; background:var(--blue); display:flex; align-items:center; justify-content:center; margin:16px auto}
              .big-check:after{content:'✔'; color:#fff; font-weight:800; font-size:54px}
              .center{text-align:center}

              @media (max-width:340px){ .row{grid-template-columns:1fr; row-gap:6px} .actions{padding-left:0} .q-item{grid-template-columns: 26px 1fr;} }

              /* =========================
                 PRINT: Blue-branded template
                 Only edit inside @media print for PDF design changes.
                 ========================= */
              #pdfReport{display:none}
              @media print{

            .row>label{
              font-size:11pt;
              font-weight:400;
              color:#444;
            }
                body{background:#fff; color:#000}
                main, .modal-backdrop{display:none !important}
                #pdfReport{display:block; font-family:Arial, Helvetica, sans-serif; padding:18px 24px}

                /* ====== CHANGE COLORS HERE (global brand blue) ====== */
                /* Safe: adjust the brand blue for PDF only */
                :root{ --blue:#1E90FF; }

                /* Title block */
                .pdf-top{display:grid; grid-template-columns: 1fr 220px; gap:16px; align-items:start; margin-bottom:10px}
                .pdf-title{font-size:45px; font-weight:1000; color:var(--blue); margin:0}
                .pdf-sub { font-size:30px; font-weight:600; color:var(--blue); margin:2px 0; line-height:1.2; text-align:left; }
                .pdf-date { font-size:18px; font-weight:500; color:var(--blue); margin:2px 0; line-height:1.2; text-align:left; }
                .pdf-divider{height:1px; background:#cfd4dc; margin:8px 0 14px 0}

                /* ====== SCORE BOX (SAFE TO EDIT) ====== */
                .score-box{
                  background:var(--blue) !important;     /* Safe: change to a hex if you want a different blue */
                  -webkit-print-color-adjust: exact;     /* Safari/Chrome */
                  print-color-adjust: exact;             /* Firefox */
                  color:#fff !important;                 /* Safe: change text color if needed */
                  border-radius:6px;
                  padding:12px 14px;
                  text-align:center;
                }
                .score-box .pct{font-size:40px; font-weight:900; margin:4px 0 2px 0}
              .score-box .raw { font-size:20px; font-weight:800; color:#fff !important; margin-bottom:6px; }
             }

            /* ====== SECTION HEADERS (SAFE TO EDIT) ====== */
            .sec-h { background:var(--blue) !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; color:#fff !important; font-weight:800; text-transform:uppercase; padding:6px 10px; border-radius:4px; margin:16px 0 8px 0; }
            .pdf-top { display:grid; grid-template-columns: 1fr 180px; gap:16px; align-items:start; margin-bottom:10px; }
            .pdf-title { font-size:34px; font-weight:900; color:var(--blue); margin:0; }

                /* ====== TABLE HEADERS (SAFE TO EDIT) ====== */
                table{width:100%; border-collapse:collapse}
                th{
                  background:var(--blue) !important;     /* Safe: header row color */
                  -webkit-print-color-adjust: exact;
                  print-color-adjust: exact;
                  color:#fff !important;
                  font-weight:800; text-transform:uppercase; font-size:12px; padding:8px
                }
                td{border:1px solid #d1d5db; font-size:12px; padding:8px; vertical-align:top}
                .muted{color:#666; font-size:11px}

                /* Statements specifics */
                .st-no{width:6%}
                .st-group{width:18%}
                .st-rating{width:12%}
                .st-title{font-weight:800}
              }

              .rec-text{font-size:11pt; font-weight:500; color:#444; margin-top:24px; line-height:1.5;}

              .group-results-header{font-size:18pt; font-weight:800; color:#444; margin-bottom:8px;}

              .rec-kicker{font-size:10pt; font-weight:400; color:#999999; margin:12px 0 8px 0}

              .group-desc{line-height:1.35; margin-top:2px; margin-bottom:14px; color:#666; font-size:.95em;}

              .score-section{margin-top:40px;}

              .group-row{padding:2px 0; margin-bottom:0;}

            /* Phase A, Step 1 final refinement — only horizontal light blue lines */
            @media print {

              /* Remove horizontal padding for Employee info cells */
              #pdfReport #pdfEmpName,
              #pdfReport #pdfEmpEmail,
              #pdfReport #pdfEmpHotel {
                padding-left: 0 !important;
                padding-right: 0 !important;
              }

              /* Table borders */
              #pdfReport table,
              #pdfReport th,
              #pdfReport td {
                border: none !important; /* remove all borders completely */
              }
              #pdfReport td {
                border-bottom: 0.5px solid #87CEFA !important; /* thin light blue horizontal line only */
              }
              #pdfReport tr:last-child td {
                border-bottom: none !important;
              }
            }

            /* Phase A — Side borders removal (print only) */
            @media print {
              /* Kill any container/card borders or shadows */
              #pdfReport .card { border: 0 !important; box-shadow: none !important; }
              /* Ensure no table frame borders */
              #pdfReport table {
                border: 0 !important;
                border-left: 0 !important;
                border-right: 0 !important;
                border-top: 0 !important;
                border-bottom: 0 !important;
                border-collapse: collapse !important;
              }
              /* Ensure no vertical borders on cells */
              #pdfReport th,
              #pdfReport td {
                border-left: 0 !important;
                border-right: 0 !important;
              }
              /* Keep only horizontal light-blue separators */
              #pdfReport td { border-bottom: 0.5px solid #87CEFA !important; }
              #pdfReport tr:last-child td { border-bottom: none !important; }
            }

            /* Phase A — Set default print page size to A4 */
            @media print {
              @page {
                size: A4;
                margin: 15mm;
              }
            }
            @media print {
              /* Information table matches SCORE BY GROUP styling */
              #pdfReport #pdfInfoTable {
                table-layout: fixed;
                width: 100%;
                border-collapse: collapse;
              }
              #pdfReport #pdfInfoTable td {
                padding: 8px 1px !important;
                font-size: 12px !important;
                vertical-align: middle !important;
                text-align: left !important;
                border-bottom: 0.5px solid #87CEFA !important;
                overflow-wrap: anywhere;      /* allow long text to break */
                word-break: break-word;       /* prevent overflow */
              }
              #pdfReport #pdfInfoTable tr:last-child td {
                border-bottom: none !important;
              }
              #pdfReport #pdfInfoTable td:nth-child(odd) {
                font-weight: 600; /* make label cells bold */
              }
            }

            /* PDF: Assessment header bar with three labels aligned to table columns */
            @media print {
              #pdfReport .assess-bar{
                display:grid;
                grid-template-columns: 2fr 0.6fr 3fr; /* match group / % / description proportions */
                column-gap: 0;
                align-items: center;
              }
              #pdfReport .assess-bar .lbl-group{ text-align:left; }
              #pdfReport .assess-bar .lbl-pct{ text-align:center; }
              #pdfReport .assess-bar .lbl-desc{ text-align:left; }
            }
            @media print {
              /* Uniform spacing for all section headers */
              #pdfReport .sec-h.assess-bar {
                margin-top: 16px !important;
                margin-bottom: 6px !important;
                padding: 4px 8px !important;
              }
            }

            /* PDF: lock Statements table column widths */
            @media print {
              #pdfReport .statements-table { table-layout: fixed; width: 100%; }
            }

            /* PDF: lock Information section to 20/30/20/30 total width */
            @media print {
              /* Ensure the whole info section spans exactly the report width */
              #pdfReport .info-grid {
                display: grid !important;
                grid-template-columns: 50% 50%; /* two cards side-by-side => total 100% */
                width: 100% !important;
                gap: 0 0; /* avoid extra horizontal spacing */
              }
              /* Inside each card: labels 40%, fields 60% -> combined = 20%/30% of total */
              #pdfReport .info-grid .card {
                display: grid !important;
                grid-template-columns: 40% 60%;
                box-sizing: border-box;
                width: 100%;
                border: 0 !important; /* keep no card borders in print */
                box-shadow: none !important;
                padding-left: 12px;
                padding-right: 12px;
              }
              /* Label cells left column, field cells right column */
              #pdfReport .info-grid .card .label,
              #pdfReport .info-grid .card .kv-label { grid-column: 1; text-align: left; }
              #pdfReport .info-grid .card .value,
              #pdfReport .info-grid .card .kv-value { grid-column: 2; text-align: left; }

              /* Make sure rows align and wrap properly */
              #pdfReport .info-grid .card > * {
                break-inside: avoid;
              }
            }
              /* Align STATEMENTS over NO column (left with numbers) */
              #pdfReport .statements-bar .lbl-stmt { grid-column: 1; text-align: left; }
              /* Align GROUP over Group col, left aligned */
              #pdfReport .statements-bar .lbl-group { grid-column: 3; text-align: left; }
              /* Align SCORE over Score col, centered */
              #pdfReport .statements-bar .lbl-score { grid-column: 4; text-align: center; }

              /* Body cells alignment */
              #pdfReport .statements-table td:nth-child(1) { text-align: left; }   /* NO. */
              #pdfReport .statements-table td:nth-child(2) { text-align: left; }   /* STATEMENT text */
              #pdfReport .statements-table td:nth-child(3) { text-align: left; }   /* GROUP values */
              #pdfReport .statements-table td:nth-child(4) { text-align: center; } /* SCORE values */
            }

            /* PDF: Fine-tune Statements section header alignment and hide duplicate header rows */
            @media print {
              
              #pdfReport .statements-bar {
                padding-left: 0 !important;
                padding-right: 0 !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
              }
              #pdfReport .statements-bar span {
                margin: 0 !important;
                padding: 0 !important;
              }
              #pdfReport .statements-bar .lbl-stmt { grid-column: 1; text-align: left; }
              #pdfReport .statements-bar .lbl-group { grid-column: 3; text-align: left; }
              #pdfReport .statements-bar .lbl-score { grid-column: 4; text-align: center; }

              /* Body cells alignment */
              #pdfReport .statements-table td:nth-child(1) { text-align: left; }
              #pdfReport .statements-table td:nth-child(2) { text-align: left; }
              #pdfReport .statements-table td:nth-child(3) { text-align: left; }
              #pdfReport .statements-table td:nth-child(4) { text-align: center; }

              /* Hide any residual header row (NO/STATEMENT/GROUP/RATING) */
              #pdfReport .statements-table thead,
              #pdfReport .statements-table tr:first-child th {
                display: none !important;
              }
              #pdfReport .statements-table tr:first-child td {
                display: none !important;
              }
            }

            /* PDF: Information section row vertical centering and remove bold labels */
            @media print {
              /* Vertically center each row in the Personal/Peer cards */
              #pdfReport .info-grid .card > * {
                display: flex !important;
                align-items: center !important;
                line-height: 1.3;
              }
              /* Remove bold from labels in Information section */
              #pdfReport .info-grid .card .label,
              #pdfReport .info-grid .card .kv-label,
              #pdfReport .info-grid .card .label b,
              #pdfReport .info-grid .card .label strong,
              #pdfReport .info-grid .card .kv-label b,
              #pdfReport .info-grid .card .kv-label strong {
                font-weight: 400 !important;
              }
            }
        </style>
<script id="embeddedQuestions" type="application/json">
            []
        </script>
<style>
            /* === FINAL fixes v68: Statements duplicate header removal + header alignment (print only) === */
            @media print {

                /* Align blue header bar labels with table columns */
                #pdfReport .statements-bar {
                    display: grid !important;
                    column-gap: 0 !important;
                    padding: 0 !important;
                    margin: 0 !important;
                }
                #pdfReport .statements-bar .lbl-stmt {
                    grid-column: 2 !important;
                    text-align: left !important;
                }
                #pdfReport .statements-bar .lbl-group {
                    grid-column: 3 !important;
                    text-align: left !important;
                }
                #pdfReport .statements-bar .lbl-score {
                    grid-column: 4 !important;
                    text-align: center !important;
                }

                /* Hide the table's header row to avoid duplication under the blue bar */
                #pdfReport #pdfStatements thead,
                #pdfReport #pdfStatements thead tr,
                #pdfReport #pdfStatements thead th {
                    display: none !important;
                }
            }
        </style>
<style>
            /* === FINAL fixes v69: Information section row alignment + unbold labels (screen + print) === */
            #pdfReport .info-grid .fields {
                align-items: center !important;
            }
            #pdfReport .info-grid .fields label {
                font-weight: 400 !important;
            }
        </style>
<style>
            /* === FINAL fixes v70: Blue section header alignment (screen + print) === */
            #pdfReport .statements-bar {
                display: grid !important;
                column-gap: 0 !important;
                align-items: center !important;
            }
            /* 1) "STATEMENTS" label aligns from the very left of the number column (No.) */
            #pdfReport .statements-bar .lbl-stmt {
                grid-column: 1 / span 2 !important; /* occupy No. + Statement columns so left edge aligns with numbers */
                justify-self: start !important;
                text-align: left !important;
            }
            /* 2) "GROUP" left-aligned with its data column */
            #pdfReport .statements-bar .lbl-group {
                grid-column: 3 !important;
                justify-self: start !important;
                text-align: left !important;
            }
            /* 3) Entire SCORE column centered */
            #pdfReport .statements-bar .lbl-score {
                grid-column: 4 !important;
                justify-self: center !important;
                text-align: center !important;
            }
            #pdfReport #pdfStatements td:nth-child(4),
            #pdfReport #pdfStatements th:nth-child(4) {
                text-align: center !important;
            }
        </style>
<style>
            /* === FINAL fixes v71: Match blue header height for STATEMENTS to other bars (print) === */
            @media print {
                #pdfReport .statements-bar {
                    padding: 6px 10px !important; /* same as .sec-h default */
                    margin: 16px 0 8px 0 !important; /* restore standard sec-h margins for visual consistency */
                }
            }
        </style>
<style>
            /* === FINAL fixes v72: Match blue header height for STATEMENTS to other bars (screen + print) === */
            #pdfReport .statements-bar {
                padding: 6px 10px !important; /* same as .sec-h default */
                margin: 16px 0 8px 0 !important;
            }
        </style>
<style>
            .number-circle {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 28px; /* circle size */
                height: 28px;
                border-radius: 50%; /* makes it round */
                background-color: #1e90ff; /* same blue as rating scales, adjust if needed */
                color: #fff; /* white number */
                font-size: 16px;
                font-weight: bold;
                margin-right: 10px; /* space between circle and text */
            }
            .step {
  display: flex;
  align-items: center;
  margin: 6px 0;
  font-size: 17px;
  font-weight: 600; /* increased from 500 */
  color: #444;
}
        </style>
<style>
            /* Final vFinal: scoring page group line layout */
            .group-line {
                display: flex;
                justify-content: space-between;
                align-items: center;
                font-weight: 600;
                margin: 2px 0;
            }

            /* Utility for hidden headings (used in pdfReport section) */
   .visually-hidden {
  position: absolute !important;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
/* end of this style block */
</style>
<!-- your other CSS and scripts -->
<style>
  

  #pdfReport .statements-bar {
    display: grid !important;
    grid-template-columns: 10% 55% 20% 15% !important;
    align-items: center !important;
    padding: 6px 10px !important;
  }

  @media print {
    #pdfReport .statements-table { table-layout: fixed; width:100%; }
    #pdfReport .statements-table col:nth-child(1){ width:10% !important; }
    #pdfReport .statements-table col:nth-child(2){ width:55% !important; }
    #pdfReport .statements-table col:nth-child(3){ width:20% !important; }
    #pdfReport .statements-table col:nth-child(4){ width:15% !important; }
  }
  </style>
</head>
<body>
<main class="container">
<h1>BED HOSPITALITY 2.0</h1>
<p class="subheader">PEER REVIEW FORM</p>
<div class="progress" id="progressHeader"><span class="dot"></span><span class="dot"></span><span class="dot"></span> <span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
<!-- PAGE 1 -->
<section id="welcome">
                <h2 class="section-title">peer information</h2>
                <div class="row"><label for="nick">your name</label><input id="nick" /></div>
                <div class="row">
  <label for="email">your email</label>
  <input 
    id="email" 
    name="email" 
    type="email" 
    required 
    autocomplete="email" 
    inputmode="email"  
  />
</div>
                <div class="row">
                    <label for="hotel">your location</label>
                    <select id="hotel" required="">
                        <option disabled="" selected="" value="">select hotel</option>
                        <option>BED Changkian</option>
                        <option>BED Phrasingh</option>
                        <option>BED Nimman</option>
                        <option>BED Chiangmai Gate</option>
                        <option>BED Flying</option>
                        <option>BED Support</option>
                    </select>
                </div>
                <h2 class="section-title">your team member</h2>
                <p class="intro">enter the details of the team member you will review. you must know this person well and you must have worked in BED for at least 12 months</p>
                <div class="row"><label for="peerName">peer reviewer</label><input id="peerName" /></div>
                <div class="row"><label for="peerEmail">email peer</label><input id="peerEmail" type="email" /></div>
                <div class="row">
                    <label for="peerHotel">peer location</label>
                    <select id="peerHotel" required="">
                        <option disabled="" selected="" value="">select hotel</option>
                        <option>BED Changkian</option>
                        <option>BED Phrasingh</option>
                        <option>BED Nimman</option>
                        <option>BED Chiangmai Gate</option>
                        <option>BED Flying</option>
                        <option>BED Support</option>
                    </select>
                </div>
                <div class="actions">
                    <button disabled="" id="toInstructions">Start</button>
                </div>
            </section>
<!-- Instructions -->
<section id="instructions" style="display: none;">
<h2 class="section-title">INSTRUCTIONS</h2>
<p class="intro">
                    Read each statement and think how you act in these situations. Then rating yourself from 1-5. Be honest with yourself. Looking in the mirror help you to understand what you're good at and what you can do better
                </p>
<h2 class="section-title">RATING</h2>
<ul class="scale-list" style="list-style: none; padding: 0; margin: 10px 0;">
<li class="scale-item" style="display: flex; align-items: center; gap: 10px; margin: 8px 0; font-size: 12pt;">
<span class="badge" style="width: 28px; height: 28px; border-radius: 50%; background: var(--blue); color: #fff; display: inline-flex; align-items: center; justify-content: center; font-weight: 700;">1</span>
<span>I am not good at this</span>
</li>
<li class="scale-item" style="display: flex; align-items: center; gap: 10px; margin: 8px 0; font-size: 12pt;">
<span class="badge" style="width: 28px; height: 28px; border-radius: 50%; background: var(--blue); color: #fff; display: inline-flex; align-items: center; justify-content: center; font-weight: 700;">2</span>
<span>I can be better at this</span>
</li>
<li class="scale-item" style="display: flex; align-items: center; gap: 10px; margin: 8px 0; font-size: 12pt;">
<span class="badge" style="width: 28px; height: 28px; border-radius: 50%; background: var(--blue); color: #fff; display: inline-flex; align-items: center; justify-content: center; font-weight: 700;">3</span>
<span>I am average at this</span>
</li>
<li class="scale-item" style="display: flex; align-items: center; gap: 10px; margin: 8px 0; font-size: 12pt;">
<span class="badge" style="width: 28px; height: 28px; border-radius: 50%; background: var(--blue); color: #fff; display: inline-flex; align-items: center; justify-content: center; font-weight: 700;">4</span>
<span>I am good at this</span>
</li>
<li class="scale-item" style="display: flex; align-items: center; gap: 10px; margin: 8px 0; font-size: 12pt;">
<span class="badge" style="width: 28px; height: 28px; border-radius: 50%; background: var(--blue); color: #fff; display: inline-flex; align-items: center; justify-content: center; font-weight: 700;">5</span>
<span>I am very good at this</span>
</li>
</ul>
<br/>
<br/>
<div class="actions">
<button class="btn-secondary" id="backToWelcome">Back</button>
<button id="toQ1">Start</button>
</div>
</section>
<!-- Q1 -->
<section id="q1" style="display: none;">
<h2 class="visually-hidden">Question 1</h2>
<div id="list-q1"></div>
<div class="actions">
<button class="btn-secondary" id="backToInstructions">Back</button>
<button id="toQ2">Next</button>
</div>
</section>
<!-- Q2 -->
<section id="q2" style="display: none;">
<h2 class="visually-hidden">Question 2</h2>
<div id="list-q2"></div>
<div class="actions">
<button class="btn-secondary" id="backToQ1">Back</button>
<button id="submitAll">Submit</button>
</div>
</section>
<!-- Score -->
<section id="finish" style="display: none;">
<h2 class="visually-hidden">Overall Score</h2>
<div class="score-section">
<div class="score-kicker">peer review score</div>
<div class="score-big" id="scorePercent">OVERALL SCORE —%</div>
<div class="gauge" id="gauge"></div>
<div class="rec-kicker"></div>
<div class="rec-text" id="recText">—</div>
</div>
<br/>
<div id="groupResultsContainer" style="margin-top: 18px;">
<div class="group-summary">
<div class="group-results-header group-title" style="font-weight: 900; margin-bottom: 8px;">SCORE BY GROUP</div>
<br/>
<div id="groupResults"></div>
</div>
</div>
<div class="actions">
<button class="btn-secondary" id="backToQ2">Back</button>
<button id="nextToPeer">Next</button>
</div>
</section>
<!-- Congrats -->
<section id="congrats" style="display: none;">
<br/>
<br/>
<br/>
<div class="big-check"></div>
<div class="center">
<h3 style="font-size: 32px; margin: 8px 0 6px 0; color: #444;">
    self-assessment<br/>
    completed
  </h3>
<div style="margin-top:10px;">
<div class="step">
<span class="number-circle">1</span>
<span>Your scores are recorded</span>
</div>
<div class="step">
<span class="number-circle">2</span>
<span>Click PDF to download the report</span>
</div>
<div class="step">
<span class="number-circle">3</span>
<span>Ask your peer to review you</span>
</div>
</div>
</div>
<br/>
<br/>
<br/>
<div class="page-actions" style="display: flex; gap: 14px; justify-content: flex-end; margin-top: 10px;">
<button class="btn-secondary btn-wide" id="congratsBack">Back</button>
<button class="btn-wide" id="congratsPdf">PDF</button>
</div>
</section>
</main>
<!-- Modal -->
<div class="modal-backdrop" id="eligBackdrop" style="position: fixed; inset: 0; background: rgba(0, 0, 0, 0.35); display: none; align-items: center; justify-content: center; z-index: 50;">
<div class="modal" style="width: min(92vw, 520px); background: #fff; border-radius: 18px; padding: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);">
<h3 style="margin: 0 0 10px 0; font-size: 18px;">please confirm</h3>
<p style="margin: 0 0 18px 0; font-size: 16px; line-height: 1.5; color: #222;">my peer knows me well and has worked in BED for at least 12 months</p>
<div class="row-btns" style="display: flex; justify-content: flex-end; gap: 10px;">
<button class="btn-secondary" id="eligCancel">Cancel</button>
<button id="eligOk">OK</button>
</div>
</div>
</div>
<!-- PRINT REPORT (Blue-branded) -->
<section aria-hidden="true" id="pdfReport">
<h2 class="visually-hidden">PDF Report</h2>
<div class="pdf-top">
<div>
<div class="pdf-title">BED HOSPITALITY 2.0</div>
<div class="pdf-sub">team member report</div>
<div class="pdf-date" id="pdfDate">assessment date —</div>
</div>
<div class="score-box">
<div class="pct" id="pdfTotalPct">—%</div>
<div class="raw" id="pdfTotalRaw">— OUT OF 175 POINTS</div>
</div>
</div>
<div class="pdf-divider"></div>
<!-- Information section -->
<div class="sec-h assess-bar"><span class="lbl-group">INFORMATION</span></div>
<div class="card" style="padding: 0;">
<table id="pdfInfoTable">
<colgroup>
<col style="width: 20%;"/>
<col style="width: 30%;"/>
<col style="width: 20%;"/>
<col style="width: 30%;"/>
</colgroup>
<tbody>
<tr>
<td>team member</td>
<td id="pdfEmpName"></td>
<td>peer reviewer</td>
<td id="pdfPeerName"></td>
</tr>
<tr>
<td>email address</td>
<td id="pdfEmpEmail"></td>
<td>email address</td>
<td id="pdfPeerEmail"></td>
</tr>
<tr>
<td>BED location</td>
<td id="pdfEmpHotel"></td>
<td>BED location</td>
<td id="pdfPeerHotel"></td>
</tr>
</tbody>
</table>
</div>
<!--  section -->
<div class="sec-h assess-bar"><span class="lbl-group">SCORE SUMMARY</span></div>
<div id="pdfBandText" style="margin-top: 10px; font-size: 16px; font-weight: 600; color: #434343; width: 100%; display: block; text-align: left; line-height: 1.5;"></div>
<!-- SCORE BY GROUP section -->
<div class="sec-h assess-bar"><span class="lbl-group">SCORE BY GROUP</span></div>
<div class="card" style="padding: 0;">
<table>
<tbody id="pdfGroupRows">
<!-- rows injected -->
</tbody>
</table>
</div>
<!-- Statements -->
<div class="sec-h statements-bar">
<span class="lbl-stmt" style="display: block;">STATEMENTS</span>
<span class="lbl-group" style="display: block;">GROUP</span>
<span class="lbl-score" style="display: block;">SCORE</span>
</div>
<div class="card" style="padding: 0;">
<table id="pdfStatements">
<colgroup>
<col/> <!-- NO -->
<col/> <!-- STATEMENT -->
<col/> <!-- GROUP -->
<col/> <!-- SCORE -->
</colgroup>
<thead>
<tr>
<th>NO</th>
<th>STATEMENT</th>
<th>GROUP</th>
<th>SCORE</th>
</tr>
</thead>
<tbody id="pdfStatementRows"><!-- rows injected --></tbody>
</table>
</div>
</section>

<script>
            // === Validation patch v2 (uses window.__S) ===
            (function () {
                function Sref() {
                    return window.__S || window.S || {};
                }
                function qIdsFor(range) {
                    var S = Sref();
                    if (!Array.isArray(S.questions)) return [];
                    return S.questions.slice(range[0], range[1]).map(function (q) {
                        return q.id;
                    });
                }
                function allAnswered(ids) {
                    var S = Sref();
                    if (!ids.length) return false;
                    return ids.every(function (id) {
                        return S.answers && S.answers[id] != null;
                    });
                }
                function isQ1Complete() {
                    return allAnswered(qIdsFor([0, 18]));
                }
                function isQ2Complete() {
                    return allAnswered(qIdsFor([18, 35]));
                }

                // Hook pill clicks to re-evaluate states
                document.addEventListener(
                    "click",
                    function (ev) {
                        var t = ev.target;
                        if (t && t.classList && t.classList.contains("pill")) {
                            var b1 = document.getElementById("toQ2");
                            if (b1) b1.disabled = !isQ1Complete();
                            var b2 = document.getElementById("submitAll");
                            if (b2) b2.disabled = !isQ2Complete();
                        }
                    },
                    true
                );

                // After entering Q1/Q2, sync button states
                var toQ1 = document.getElementById("toQ1");
                if (toQ1) {
                    var prevToQ1 = toQ1.onclick;
                    toQ1.onclick = function () {
                        if (typeof prevToQ1 === "function") prevToQ1();
                        var b1 = document.getElementById("toQ2");
                        if (b1) b1.disabled = !isQ1Complete();
                    };
                }

                var toQ2 = document.getElementById("toQ2");
                if (toQ2) {
                    var prevToQ2 = toQ2.onclick;
                    toQ2.onclick = function () {
                        if (typeof prevToQ2 === "function") prevToQ2();
                        var sub = document.getElementById("submitAll");
                        if (sub) sub.disabled = !isQ2Complete();
                    };
                }

                // Hard guard against advancing when incomplete
                document.addEventListener(
                    "click",
                    function (ev) {
                        var id = ev.target && ev.target.id;
                        if (id === "toQ2" && !isQ1Complete()) {
                            ev.preventDefault();
                            ev.stopPropagation();
                        }
                        if (id === "submitAll" && !isQ2Complete()) {
                            ev.preventDefault();
                            ev.stopPropagation();
                        }
                    },
                    true
                );
            })();
            // === End patch ===
        </script>
<script>
            // === Validation patch v3: robust state sync for Next/Submit ===
            (function () {
                function Sref() {
                    return window.__S || window.S || {};
                }
                function qIdsFor(range) {
                    var S = Sref();
                    if (!Array.isArray(S.questions)) return [];
                    return S.questions.slice(range[0], range[1]).map(function (q) {
                        return q.id;
                    });
                }
                function allAnswered(ids) {
                    var S = Sref();
                    if (!ids.length) return false;
                    return ids.every(function (id) {
                        return S.answers && S.answers[id] != null;
                    });
                }
                function isQ1Complete() {
                    return allAnswered(qIdsFor([0, 18]));
                }
                function isQ2Complete() {
                    return allAnswered(qIdsFor([18, 35]));
                }

                function setState() {
                    try {
                        var q1Visible = document.getElementById("q1") && document.getElementById("q1").style.display !== "none";
                        var q2Visible = document.getElementById("q2") && document.getElementById("q2").style.display !== "none";
                        var b1 = document.getElementById("toQ2");
                        if (b1 && q1Visible) b1.disabled = !isQ1Complete();
                        var b2 = document.getElementById("submitAll");
                        if (b2 && q2Visible) b2.disabled = !isQ2Complete();
                    } catch (_) {}
                }

                // Hook pill clicks to re-evaluate states
                document.addEventListener(
                    "click",
                    function (ev) {
                        var t = ev.target;
                        if (t && t.classList && t.classList.contains("pill")) {
                            setState();
                        }
                    },
                    true
                );

                // After entering Q1/Q2, sync button states
                var toQ1 = document.getElementById("toQ1");
                if (toQ1) {
                    var prevToQ1 = toQ1.onclick;
                    toQ1.onclick = function () {
                        if (typeof prevToQ1 === "function") prevToQ1();
                        setState();
                    };
                }

                var toQ2 = document.getElementById("toQ2");
                if (toQ2) {
                    var prevToQ2 = toQ2.onclick;
                    toQ2.onclick = function () {
                        if (typeof prevToQ2 === "function") prevToQ2();
                        setState();
                    };
                }

                // Wrap show() to always refresh states after page changes (without touching visuals)
                if (typeof window.show === "function") {
                    var oldShow = window.show;
                    window.show = function (id) {
                        oldShow(id);
                        setState();
                    };
                }

                // Hard guard against advancing when incomplete
                document.addEventListener(
                    "click",
                    function (ev) {
                        var id = ev.target && ev.target.id;
                        if (id === "toQ2" && !isQ1Complete()) {
                            ev.preventDefault();
                            ev.stopPropagation();
                        }
                        if (id === "submitAll" && !isQ2Complete()) {
                            ev.preventDefault();
                            ev.stopPropagation();
                        }
                    },
                    true
                );

                // Initial sync
                document.addEventListener("DOMContentLoaded", setState);
                setTimeout(setState, 0);
            })();
            // === End patch v3 ===
        </script>
<script>
            // === Validation patch v4: DOM-based completion (resilient) ===
            (function () {
                function uniqueAnsweredCount(containerId) {
                    var box = document.getElementById(containerId);
                    if (!box) return 0;
                    var items = box.querySelectorAll(".q-item");
                    var answered = 0;
                    items.forEach(function (it) {
                        if (it.querySelector(".pill.selected")) answered++;
                    });
                    return answered;
                }
                function q1Done() {
                    return uniqueAnsweredCount("list-q1") >= 18;
                }
                function q2Done() {
                    return uniqueAnsweredCount("list-q2") >= 17;
                }

                function sync() {
                    try {
                        var q1Visible = document.getElementById("q1") && document.getElementById("q1").style.display !== "none";
                        var q2Visible = document.getElementById("q2") && document.getElementById("q2").style.display !== "none";
                        var b1 = document.getElementById("toQ2");
                        if (b1 && q1Visible) b1.disabled = !q1Done();
                        var b2 = document.getElementById("submitAll");
                        if (b2 && q2Visible) b2.disabled = !q2Done();
                    } catch (_) {}
                }

                // Monitor pill clicks
                document.addEventListener(
                    "click",
                    function (ev) {
                        var t = ev.target;
                        if (t && t.classList && t.classList.contains("pill")) {
                            // Wait a tick for .selected class to update, then sync
                            setTimeout(sync, 0);
                        }
                    },
                    true
                );

                // Wrap show() to re-sync after page changes
                if (typeof window.show === "function") {
                    var oldShow = window.show;
                    window.show = function (id) {
                        oldShow(id);
                        setTimeout(sync, 0);
                    };
                }

                // Hard guard
                document.addEventListener(
                    "click",
                    function (ev) {
                        var id = ev.target && ev.target.id;
                        if (id === "toQ2" && !q1Done()) {
                            ev.preventDefault();
                            ev.stopPropagation();
                        }
                        if (id === "submitAll" && !q2Done()) {
                            ev.preventDefault();
                            ev.stopPropagation();
                        }
                    },
                    true
                );

                // Initial sync
                document.addEventListener("DOMContentLoaded", function () {
                    setTimeout(sync, 0);
                });
                setTimeout(sync, 50);
            })();
            // === End patch v4 ===
        </script>
<script>
            (function () {
                var bar = document.querySelector("#pdfReport .statements-bar");
                if (!bar) return;
                var labelStmt = bar.querySelector(".lbl-stmt");
                if (labelStmt) {
                    labelStmt.textContent = "STATEMENTS";
                }
                var labelGroup = bar.querySelector(".lbl-group");
                if (labelGroup) {
                    labelGroup.textContent = "GROUP";
                }
                var labelScore = bar.querySelector(".lbl-score");
                if (labelScore) {
                    labelScore.textContent = "SCORE";
                }
            })();
        </script>
<!-- === Non-invasive group rename + display sync (drop-in) === -->

<!-- === End drop-in === -->

<script>
            (function(){
              // Date format: DDMMMYYYY (e.g., 24Sep2025)
              function formatDateDDMMMYYYY(d=new Date()){
                const mon = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
                const dd  = String(d.getDate()).padStart(2,'0');
                return `${dd}${mon[d.getMonth()]}${d.getFullYear()}`;
              }

              // Try multiple sources to get overall % (robust)
              function getOverallPct(){
                try { if (typeof window.computeOverallPercent === 'function') {
                  const v = window.computeOverallPercent(); if (!isNaN(v)) return Math.round(v);
                }} catch(e){}
                try { if (window.totals && typeof window.totals.pct === 'number') return Math.round(window.totals.pct); } catch(e){}
                const sp = document.getElementById('scorePercent');
                if (sp) {
                  const m = sp.textContent.match(/(\d+)\s*%/);
                  if (m) return parseInt(m[1],10);
                }
                return 0;
              }
            })();
        </script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const el = document.getElementById('peerEmail');
  if (!el) return;
  el.type = 'email';
  el.required = true;
  el.autocomplete = 'email';
  el.setAttribute('inputmode','email');
  let msg = document.createElement('small');
  msg.id = 'emailMsg';
  msg.style.display = 'block';
  msg.style.marginTop = '4px';
  el.after(msg);
  const show = () => { msg.textContent = el.checkValidity() ? '' : 'Please enter a valid email address'; };
  el.addEventListener('input', show);
  el.addEventListener('blur', show);
});
</script>
<!-- Custom "Are you sure?" confirmation modal (white, left text, right buttons) v3 -->
<style>
  #confirmModal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:9999}
  #confirmModal .modal-box{background:#fff;border-radius:14px;box-shadow:0 2px 8px rgba(0,0,0,.25);padding:22px 24px;width:86%;max-width:380px;font-family:system-ui,Arial,sans-serif;text-align:left}
  #confirmModal .title{font-size:17px;font-weight:700;color:#111;margin:0 0 8px}
  #confirmModal .text{font-size:15px;font-weight:400;color:#333;line-height:1.5;margin:0 0 18px}
  #confirmModal .actions{display:flex;justify-content:flex-end;gap:10px}
  #confirmModal button{font-size:15px;font-weight:600;border:none;border-radius:10px;padding:8px 22px;cursor:pointer}
  #confirmModal .btn-cancel{background:#ddd;color:#333}
  #confirmModal .btn-ok{background:#1E90FF;color:#fff}
</style>
<div aria-describedby="confirmText" aria-labelledby="confirmTitle" aria-modal="true" id="confirmModal" role="dialog">
<div class="modal-box">
<div class="title" id="confirmTitle">Are you sure?</div>
<div class="text" id="confirmText">Your assessment scores will be automatically saved.</div>
<div class="actions">
<button class="btn-cancel" id="cancelConfirm" type="button">No</button>
<button class="btn-ok" id="okConfirm" type="button">Yes</button>
</div>
</div>
</div>
<script>
(function () {
  const modal = document.getElementById("confirmModal");
  const cancel = document.getElementById("cancelConfirm");
  const ok = document.getElementById("okConfirm");
  const submitBtn = document.getElementById("submitAll");
  if (!submitBtn || !modal) return;

  // intercept click to show modal
  function intercept(e){
    e.preventDefault();
    modal.style.display = "flex";
    setTimeout(()=>cancel.focus(),100);
  }
  submitBtn.addEventListener("click", intercept);

  // close on "No"
  cancel.addEventListener("click", () => { modal.style.display = "none"; });

  // proceed on "Yes"
  ok.addEventListener("click", () => {
    modal.style.display = "none";
    submitBtn.removeEventListener("click", intercept);
    submitBtn.disabled = true;
    submitBtn.click(); // runs existing submit logic
  });
})();
</script>
<script>
document.addEventListener("bed:pdf-ready", () => {
  // find the finish section
  const finish = document.getElementById("finish");
  if (!finish) return;

  // check if message already exists to prevent duplicates
  if (!finish.querySelector("#recordMsg")) {
    const p = document.createElement("p");
    p.id = "recordMsg";
    p.textContent = "Your assessment is recorded.";
    p.style.marginTop = "12px";
    p.style.fontSize = "16px";
    p.style.color = "#434343";
    p.style.textAlign = "left";

    // find PDF instruction text
    const pdfHint = Array.from(finish.querySelectorAll("p, div"))
      .find(el => el.textContent && el.textContent.includes("Click PDF"));

    if (pdfHint) {
      pdfHint.parentNode.insertBefore(p, pdfHint);
    } else {
      finish.appendChild(p);
    }
  }
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  // Wait until the completion (congrats) page is shown
  const targetNode = document.getElementById("congrats");
  if (!targetNode) return;

  const observer = new MutationObserver(() => {
    const pdfText = targetNode.querySelector("p");
    if (pdfText && pdfText.textContent.toLowerCase().includes("click pdf")) {
      // Only add once
      if (!document.getElementById("recordedMsg")) {
        const msg = document.createElement("p");
        msg.id = "recordedMsg";
        msg.textContent = "Your assessment is recorded.";
        msg.style.fontSize = "16px";
        msg.style.color = "#434343";
        msg.style.marginBottom = "4px";
        pdfText.parentNode.insertBefore(msg, pdfText);
      }
    }
  });

  observer.observe(targetNode, { childList: true, subtree: true });
});
</script>
<script src="../gsync.js?v=21"></script>
</body>
</html>
